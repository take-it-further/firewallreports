name: firewallreports
version: '1.0' 
summary: Log collector appliance for firewallreports.co.uk
description: |
  Log collector appliance for firewallreports.co.uk

#confinement: devmode

parts:
  logstash:
    plugin: dump
    source: https://artifacts.elastic.co/downloads/logstash/logstash-6.2.4.tar.gz
    build-packages: 
    - ca-certificates
    - ca-certificates-java
    - openjdk-8-jre-headless
    stage-packages:
    - ca-certificates
    - ca-certificates-java
    - openjdk-8-jre-headless

apps:
  logstash:
    command: |
      env LOGSTASH_HOME=$SNAP JAVA_HOME=$SNAP/usr/lib/jvm/default-java
      bin/logstash -f conf/logstash.conf
    plugs: [network-bind, network, home]
    daemon: simple
    restart-condition: always
